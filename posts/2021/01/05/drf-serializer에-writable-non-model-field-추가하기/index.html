<!doctype html><html lang=en><head><title>[DRF] Serializer에 writable non-model field 추가하기 &ndash; litsynp.log</title>
<meta name=description content><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=UTF-8><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css integrity="sha512-1sCRPdkRXhBV2PBLUdRb4tMg1w2YPf37qatUFeS7zlBy7jJI8Lf4VHwWfZZfpXtYSLy85pkm9GaYVYMfw5BC1A==" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/academicons/1.9.1/css/academicons.min.css integrity="sha512-b1ASx0WHgVFL5ZQhTgiPWX+68KjS38Jk87jg7pe+qC7q9YkEtFq0z7xCglv7qGIs/68d3mAp+StfC8WKC5SSAg==" crossorigin=anonymous><link rel=stylesheet href=https://blog.litsynp.com/css/palettes/base16-dark.css><link rel=stylesheet href=https://blog.litsynp.com/css/risotto.css><link rel=stylesheet href=https://blog.litsynp.com/css/custom.css><link rel=icon href=https://blog.litsynp.com/favicon.ico></head><body><div class=page><header class=page__header><nav class="page__nav main-nav"><ul><h1 class=page__logo><a href=https://blog.litsynp.com/ class=page__logo-inner>litsynp.log</a></h1><li class=main-nav__item><a class=nav-main-item href=https://blog.litsynp.com/posts title>posts</a></li><li class=main-nav__item><a class=nav-main-item href=https://blog.litsynp.com/tags title>tags</a></li><li class=main-nav__item><a class=nav-main-item href=https://blog.litsynp.com/categories title>categories</a></li><li class=main-nav__item><a class=nav-main-item href=https://blog.litsynp.com/series title>series</a></li></ul></nav></header><section class=page__body><header class=content__header><h1>[DRF] Serializer에 writable non-model field 추가하기</h1></header><div class=content__body><h2 id=문제>문제</h2><p><em>Django</em> 및 <em>DRF</em>에서 model에 정의하지 않은 필드를 <strong>POST / PUT용 serializer</strong>에 추가하고 싶을 때가 있다. 그냥 <code>serializers.CharField()</code>로 추가하면 <code>unexpected keyword</code>라고 뜨면서 추가할 수 없는 문제가 발생한다.</p><h2 id=해결법>해결법</h2><p>Serializer에 추가해둔 필드를 <code>validate</code> 메소드에서 <strong>model 생성에 사용되지 않도록</strong> <code>pop()</code> 시켜준다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>UserSerializer</span>(serializers<span style=color:#f92672>.</span>ModelSerializer):
</span></span><span style=display:flex><span>    non_model_field <span style=color:#f92672>=</span> serializers<span style=color:#f92672>.</span>CharField(max_length<span style=color:#f92672>=</span><span style=color:#ae81ff>300</span>, allow_blank<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>, write_only<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Meta</span>:
</span></span><span style=display:flex><span>        model <span style=color:#f92672>=</span> User
</span></span><span style=display:flex><span>        fields <span style=color:#f92672>=</span> (<span style=color:#e6db74>&#39;id&#39;</span>, <span style=color:#e6db74>&#39;username&#39;</span>, <span style=color:#e6db74>&#39;password&#39;</span>, <span style=color:#e6db74>&#39;non_model_field&#39;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>validate</span>(self, attrs):
</span></span><span style=display:flex><span>        <span style=color:#75715e># ...</span>
</span></span><span style=display:flex><span>        attrs<span style=color:#f92672>.</span>pop(<span style=color:#e6db74>&#39;non_model_field&#39;</span>, <span style=color:#66d9ef>None</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> super()<span style=color:#f92672>.</span>validate(attrs)
</span></span></code></pre></div><h2 id=ref>REF</h2><p><a href=https://stackoverflow.com/questions/28322901/drf-modelserializer-with-a-non-model-write-only-field>Stack Overflow</a></p></div><footer class=content__footer></footer></section><section class=page__aside><div class=aside__about><div class=aside__about><h1 class=about__title>litsynp.log</h1></div><ul class=aside__social-links><li><a href=https://www.github.com/litsynp rel=me aria-label=GitHub title=GitHub><i class="fa-brands fa-github" aria-hidden=true></i></a>&nbsp;</li><li><a href=https://www.linkedin.com/in/litsynp rel=me aria-label=LinkedIn title=LinkedIn><i class="fa-brands fa-linkedin" aria-hidden=true></i></a>&nbsp;</li><li><a href=https://docs.litsynp.com rel=me aria-label=GitBook title=GitBook><i class="fa fa-book" aria-hidden=true></i></a>&nbsp;</li><li><a href=mailto:nocte55is@gmail.com rel=me aria-label=Email title=Email><i class="fa-solid fa-envelope" aria-hidden=true></i></a>&nbsp;</li></ul><section><div>Latest Posts:</div><li><a href=https://blog.litsynp.com/posts/2024/07/28/weird-chars-on-macos/>맥북에서 한글 입력 시 알 수 없는 문자가 같이 입력되는 버그</a></li><li><a href=https://blog.litsynp.com/posts/2023/10/10/flip-flops-and-latches/>Flip-Flops and Latches</a></li><li><a href=https://blog.litsynp.com/posts/2023/10/08/hugo-from-scratch/>Hugo 블로그 만들기</a></li></section></div><hr><div class=aside__content><p>2022-01-05</p></div></section><section class=page__comments><script src=https://utteranc.es/client.js repo=litsynp/litsynp.github.io issue-term=pathname theme=github-dark crossorigin=anonymous async></script></section><footer class=page__footer><p><br><span class=active>$ echo $LANG<br><b>English</b></span><br></p><br><br><p class=copyright>© <a href=https://github.com/litsynp>litsynp</a>.</p><p class=advertisement>Powered by <a href=https://gohugo.io/>hugo</a> and <a href=https://github.com/joeroe/risotto>risotto</a>.</p></footer></div></body></html>