<!doctype html><html lang=en><head><title>[프로그래머스][Level 2][#17680] 캐시 해설 &ndash; litsynp.log</title><meta name=description content><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css integrity="sha512-1sCRPdkRXhBV2PBLUdRb4tMg1w2YPf37qatUFeS7zlBy7jJI8Lf4VHwWfZZfpXtYSLy85pkm9GaYVYMfw5BC1A==" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/academicons/1.9.1/css/academicons.min.css integrity="sha512-b1ASx0WHgVFL5ZQhTgiPWX+68KjS38Jk87jg7pe+qC7q9YkEtFq0z7xCglv7qGIs/68d3mAp+StfC8WKC5SSAg==" crossorigin=anonymous><link rel=stylesheet href=https://blog.litsynp.com/css/palettes/base16-dark.css><link rel=stylesheet href=https://blog.litsynp.com/css/risotto.css><link rel=stylesheet href=https://blog.litsynp.com/css/custom.css><link rel=icon href=https://blog.litsynp.com/favicon.ico></head><body><div class=page><header class=page__header><nav class="page__nav main-nav"><ul><h1 class=page__logo><a href=https://blog.litsynp.com/ class=page__logo-inner>litsynp.log</a></h1><li class=main-nav__item><a class=nav-main-item href=https://blog.litsynp.com/posts title>posts</a></li><li class=main-nav__item><a class=nav-main-item href=https://blog.litsynp.com/tags title>tags</a></li><li class=main-nav__item><a class=nav-main-item href=https://blog.litsynp.com/categories title>categories</a></li><li class=main-nav__item><a class=nav-main-item href=https://blog.litsynp.com/series title>series</a></li></ul></nav></header><section class=page__body><header class=content__header><h1>[프로그래머스][Level 2][#17680] 캐시 해설</h1></header><div class=content__body><h2 id=about>About</h2><ul><li><strong>사이트</strong>: 프로그래머스</li><li><strong>이름</strong>: [1차] 캐시</li><li><strong>수준</strong>: LEVEL 2</li><li><strong>유형</strong>: 자료구조</li><li><strong>출제</strong>: 2018 KAKAO BLIND RECRUITMENT</li><li><strong>주소</strong>: <a href=https://programmers.co.kr/learn/courses/30/lessons/17680>https://programmers.co.kr/learn/courses/30/lessons/17680</a></li></ul><h2 id=해설>해설</h2><p>LRU 캐시가 무엇인지 친절하게 해설에서 설명을 해줬다. 가장 오래된 데이터를 교체하면 된다.</p><p><code>LinkedHashSet</code> 을 생각해서 풀 수도 있겠다. 하지만 자바에서 친절하게 <code>LinkedHashMap</code> 에서 <code>removeEldestEntry</code>를 오버라이딩할 수 있도록 제공해서, 이를 오버라이딩하는 것으로 쉽게 풀 수 있다.</p><p><code>LinkedHashMap</code>을 생성할 때, <strong>매개변수 3개</strong> (코드 참고)를 넣어주는 것이 중요하다.</p><p><code>LinkedHashMap</code>은 기본적으로 넣은 순서로 정렬되는 <strong>insertion-ordered</strong>이다. 이걸 접근 순서로 바꾸는 <strong>access-ordered</strong> (즉, <strong>LRU</strong>)로 바꾸려면 3번째 변수인 <code>accessOrder</code>에 true를 대입해줘야 한다. 두 번째 매개변수인 <code>loadFactor</code>은 <code>0.75f</code>가 optimal한 편이니 <code>0.75f</code>를 넣어주면 된다. (물론 달리 해도 동작은 한다. 참고 링크를 참고할 것)</p><p>그리고 <code>cache.get()</code>를 <strong>반드시</strong> 넣어줘야 access 했는지를 <code>LinkedHashMap</code> 이 알 수 있다. <code>containsKey()</code>는 접근으로 안 쳐주는 것으로 보인다.</p><p>캐시 사이즈가 0이면 저장이 안되는 조건을 처음에 놓치긴 했는데, 효율성의 문제지 빼도 작동은 할 것이다.</p><h2 id=참고>참고</h2><p><a href=https://stackoverflow.com/questions/35838739/linkedhashmap-ordering>StackOverflow - LinkedHashMap ordering</a></p><p><a href=https://stackoverflow.com/questions/61341274/why-is-loadfactor-in-hashmap-is-set-to-0-75-by-default>StackOverflow - why is loadFactor in HashMap is set to 0.75 by default? [duplicate]</a></p><h2 id=코드>코드</h2><p><a href=https://github.com/litsynp/ps-java/blob/main/app/src/main/java/psjava/programmers/challenges/level2/Q17680.java>GitHub</a></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>import</span> java.util.*<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Q17680</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>solution</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> cacheSize<span style=color:#f92672>,</span> String<span style=color:#f92672>[]</span> cities<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>int</span> answer <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 캐시 사이즈 0이면 저장이 안됨
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>cacheSize <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> cities<span style=color:#f92672>.</span><span style=color:#a6e22e>length</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>5</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        LRUCache cache <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> LRUCache<span style=color:#f92672>(</span>cacheSize<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>String city <span style=color:#f92672>:</span> cities<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            answer <span style=color:#f92672>+=</span> cache<span style=color:#f92672>.</span><span style=color:#a6e22e>execute</span><span style=color:#f92672>(</span>city<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> answer<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// LRU: Least Recently Used
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>LRUCache</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        Map<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>,</span> Integer<span style=color:#f92672>&gt;</span> cache<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>final</span> <span style=color:#66d9ef>int</span> cacheSize<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>LRUCache</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> _cacheSize<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            cacheSize <span style=color:#f92672>=</span> _cacheSize<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// true를 줌으로써 &#34;insertion-ordered&#34;가 아닌 &#34;access-ordered&#34; map으로 바꾼다.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            cache <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> LinkedHashMap<span style=color:#f92672>&lt;&gt;(</span>cacheSize<span style=color:#f92672>,</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>.</span><span style=color:#a6e22e>75f</span><span style=color:#f92672>,</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>protected</span> <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>removeEldestEntry</span><span style=color:#f92672>(</span>java<span style=color:#f92672>.</span><span style=color:#a6e22e>util</span><span style=color:#f92672>.</span><span style=color:#a6e22e>Map</span><span style=color:#f92672>.</span><span style=color:#a6e22e>Entry</span><span style=color:#f92672>&lt;</span>String<span style=color:#f92672>,</span> Integer<span style=color:#f92672>&gt;</span> eldest<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                    <span style=color:#75715e>// capacity보다 크면 가장 오래된 데이터를 자동으로 삭제
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                    <span style=color:#66d9ef>return</span> size<span style=color:#f92672>()</span> <span style=color:#f92672>&gt;</span> cacheSize<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>};</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>execute</span><span style=color:#f92672>(</span>String in<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            in <span style=color:#f92672>=</span> in<span style=color:#f92672>.</span><span style=color:#a6e22e>toLowerCase</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>cache<span style=color:#f92672>.</span><span style=color:#a6e22e>containsKey</span><span style=color:#f92672>(</span>in<span style=color:#f92672>))</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                <span style=color:#75715e>// cache hit
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                cache<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>in<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>1</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span> <span style=color:#66d9ef>else</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                cache<span style=color:#f92672>.</span><span style=color:#a6e22e>put</span><span style=color:#f92672>(</span>in<span style=color:#f92672>,</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>5</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div></div><footer class=content__footer></footer></section><section class=page__aside><div class=aside__about><div class=aside__about><h1 class=about__title>litsynp.log</h1></div><ul class=aside__social-links><li><a href=https://www.github.com/litsynp rel=me aria-label=GitHub title=GitHub><i class="fa-brands fa-github" aria-hidden=true></i></a>&nbsp;</li><li><a href=https://www.linkedin.com/in/litsynp rel=me aria-label=LinkedIn title=LinkedIn><i class="fa-brands fa-linkedin" aria-hidden=true></i></a>&nbsp;</li><li><a href=https://docs.litsynp.com rel=me aria-label=GitBook title=GitBook><i class="fa fa-book" aria-hidden=true></i></a>&nbsp;</li><li><a href=mailto:nocte55is@gmail.com rel=me aria-label=Email title=Email><i class="fa-solid fa-envelope" aria-hidden=true></i></a>&nbsp;</li></ul><section><div>Latest Posts:</div><li><a href=https://blog.litsynp.com/posts/2023/10/10/flip-flops-and-latches/>Flip-Flops and Latches</a></li><li><a href=https://blog.litsynp.com/posts/2023/10/08/hugo-from-scratch/>Hugo 블로그 만들기</a></li><li><a href=https://blog.litsynp.com/posts/2023/10/07/intro-to-nvim/>nvim 입문기</a></li></section></div><hr><div class=aside__content><p>2022-06-05</p></div></section><section class=page__comments><script src=https://utteranc.es/client.js repo=litsynp/litsynp.github.io issue-term=pathname theme=github-dark crossorigin=anonymous async></script></section><footer class=page__footer><p></p><br><br><p class=copyright>© <a href=https://github.com/litsynp>litsynp</a>.</p><p class=advertisement>Powered by <a href=https://gohugo.io/>hugo</a> and <a href=https://github.com/joeroe/risotto>risotto</a>.</p></footer></div></body></html>